<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>stm32plus: stm32plus::display::ADS7843AsyncTouchScreen Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">stm32plus</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacestm32plus.html">stm32plus</a>      </li>
      <li class="navelem"><a class="el" href="namespacestm32plus_1_1display.html">display</a>      </li>
      <li class="navelem"><a class="el" href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.html">ADS7843AsyncTouchScreen</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">stm32plus::display::ADS7843AsyncTouchScreen Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="stm32plus::display::ADS7843AsyncTouchScreen" --><!-- doxytag: inherits="stm32plus::display::TouchScreen,stm32plus::Observer" -->
<p>ADS7843TouchScreen supporting async notifications via an EXTI line.  
 <a href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ADS7843AsyncTouchScreen_8h_source.html">ADS7843AsyncTouchScreen.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for stm32plus::display::ADS7843AsyncTouchScreen:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.png" usemap="#stm32plus::display::ADS7843AsyncTouchScreen_map" alt=""/>
  <map id="stm32plus::display::ADS7843AsyncTouchScreen_map" name="stm32plus::display::ADS7843AsyncTouchScreen_map">
<area href="classstm32plus_1_1display_1_1TouchScreen.html" title="Base class for touch screen implementations." alt="stm32plus::display::TouchScreen" shape="rect" coords="0,56,285,80"/>
<area href="classstm32plus_1_1Observer.html" title="Base class for observers." alt="stm32plus::Observer" shape="rect" coords="295,56,580,80"/>
<area href="classstm32plus_1_1Observable.html" title="base class for classes that raise events" alt="stm32plus::Observable" shape="rect" coords="0,0,285,24"/>
</map>
 </div></div>

<p><a href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.html#a8980a581ae3d7c367c6a84b1af6589d3">ADS7843AsyncTouchScreen</a> (<a class="el" href="classstm32plus_1_1display_1_1TouchScreenCalibration.html">TouchScreenCalibration</a> &amp;calibration, <a class="el" href="classstm32plus_1_1display_1_1TouchScreenPostProcessor.html">TouchScreenPostProcessor</a> &amp;postProcessor, <a class="el" href="classstm32plus_1_1SpiPollingWriter.html">SpiPollingWriter</a> &amp;spi, const <a class="el" href="classstm32plus_1_1Gpio.html">Gpio</a> &amp;irqPin, <a class="el" href="classstm32plus_1_1ExtiBase.html">ExtiBase</a> &amp;exti)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.html#a25d119f5de202fe976f35ed194bb72e4">isTouched</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.html#a18f121d8b0133b9e519dc87658cd78b8">getCoordinates</a> (<a class="el" href="classstm32plus_1_1display_1_1Point.html">Point</a> &amp;point)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.html#ae86519878e534859843dabf445accdd6">onNotify</a> (<a class="el" href="classstm32plus_1_1Observable.html">Observable</a> &amp;sender, ObservableEvent::E event, void *context)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstm32plus_1_1display_1_1ADS7843AsyncTouchScreen.html#a35c8fad47fb2dc6e18f208f738ea310f">onSubjectDestroyed</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>ADS7843TouchScreen supporting async notifications via an EXTI line. </p>
<p>There can be only one instance of this class in scope at a time. The ADS7843 is a classic resistive 4-wire ADC supporting an SPI interface. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8980a581ae3d7c367c6a84b1af6589d3"></a><!-- doxytag: member="stm32plus::display::ADS7843AsyncTouchScreen::ADS7843AsyncTouchScreen" ref="a8980a581ae3d7c367c6a84b1af6589d3" args="(TouchScreenCalibration &amp;calibration, TouchScreenPostProcessor &amp;postProcessor, SpiPollingWriter &amp;spi, const Gpio &amp;irqPin, ExtiBase &amp;exti)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stm32plus::display::ADS7843AsyncTouchScreen::ADS7843AsyncTouchScreen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstm32plus_1_1display_1_1TouchScreenCalibration.html">TouchScreenCalibration</a> &amp;&#160;</td>
          <td class="paramname"><em>calibration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classstm32plus_1_1display_1_1TouchScreenPostProcessor.html">TouchScreenPostProcessor</a> &amp;&#160;</td>
          <td class="paramname"><em>postProcessor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classstm32plus_1_1SpiPollingWriter.html">SpiPollingWriter</a> &amp;&#160;</td>
          <td class="paramname"><em>spi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classstm32plus_1_1Gpio.html">Gpio</a> &amp;&#160;</td>
          <td class="paramname"><em>irqPin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classstm32plus_1_1ExtiBase.html">ExtiBase</a> &amp;&#160;</td>
          <td class="paramname"><em>exti</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">calibration</td><td>The class used to translate raw readings to display points. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">postProcessor</td><td>The postprocessor for the points received from the screen. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">spi</td><td>Reference to the SPI instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">exti</td><td>Reference to the EXTI instance - must not go out of scope. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">irqPin</td><td>Reference to the pin used to raise the IRQ on the EXTI line. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a18f121d8b0133b9e519dc87658cd78b8"></a><!-- doxytag: member="stm32plus::display::ADS7843AsyncTouchScreen::getCoordinates" ref="a18f121d8b0133b9e519dc87658cd78b8" args="(Point &amp;point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool stm32plus::display::ADS7843AsyncTouchScreen::getCoordinates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstm32plus_1_1display_1_1Point.html">Point</a> &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the co-ordinates of the touch. Sampling the panel is essentially an ADC operation with all the problems of outliers and noise that comes with it. To minimise the likelihood of bad data which would result in bizarre 'phantom touches' to the user, we will take 5 samples and use the median.</p>
<p>If the user lifts off the screen during the sampling then we abort.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">point</td><td>The converted co-ordinate. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classstm32plus_1_1display_1_1TouchScreen.html#a31e5057b8692adb08ee8266bab70ce8d">stm32plus::display::TouchScreen</a>.</p>

</div>
</div>
<a class="anchor" id="a25d119f5de202fe976f35ed194bb72e4"></a><!-- doxytag: member="stm32plus::display::ADS7843AsyncTouchScreen::isTouched" ref="a25d119f5de202fe976f35ed194bb72e4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool stm32plus::display::ADS7843AsyncTouchScreen::isTouched </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return true if the screen is touched. i.e. PENIRQ = low </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if touched. </dd></dl>

<p>Implements <a class="el" href="classstm32plus_1_1display_1_1TouchScreen.html#a1f4a7da68b082c1f9bf3aa8caf97c009">stm32plus::display::TouchScreen</a>.</p>

</div>
</div>
<a class="anchor" id="ae86519878e534859843dabf445accdd6"></a><!-- doxytag: member="stm32plus::display::ADS7843AsyncTouchScreen::onNotify" ref="ae86519878e534859843dabf445accdd6" args="(Observable &amp;sender, ObservableEvent::E event, void *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void stm32plus::display::ADS7843AsyncTouchScreen::onNotify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstm32plus_1_1Observable.html">Observable</a> &amp;&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ObservableEvent::E&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called when an event has been raised, probably from an interrupt so consumers should take care to return quickly.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sender</td><td>A reference to the sender of the event.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>The type of event being raised.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The context for the event. The type of this pointer is dependent on the event_ parameter. Implementors of this method will have to cast context_ to what it really is. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classstm32plus_1_1Observer.html#a1c0fc4600093c06e1a1ecf55d169b265">stm32plus::Observer</a>.</p>

</div>
</div>
<a class="anchor" id="a35c8fad47fb2dc6e18f208f738ea310f"></a><!-- doxytag: member="stm32plus::display::ADS7843AsyncTouchScreen::onSubjectDestroyed" ref="a35c8fad47fb2dc6e18f208f738ea310f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stm32plus::display::ADS7843AsyncTouchScreen::onSubjectDestroyed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classstm32plus_1_1Exti.html" title="Template implementation for the EXTI lines.">Exti</a> has been destroyed, unregistering will be impossible </p>

<p>Reimplemented from <a class="el" href="classstm32plus_1_1Observer.html#a95cc271b5092d3ae41873ea23bec03b8">stm32plus::Observer</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/display/touch/<a class="el" href="ADS7843AsyncTouchScreen_8h_source.html">ADS7843AsyncTouchScreen.h</a></li>
<li>src/display/touch/ADS7843AsyncTouchScreen.cpp</li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Sep 4 2012 20:25:41 for stm32plus by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
